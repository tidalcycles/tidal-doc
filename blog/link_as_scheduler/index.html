<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">How Link became Tidal&#x27;s scheduler | Tidal Cycles</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tidalcycles.org/blog/link_as_scheduler"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="How Link became Tidal&#x27;s scheduler | Tidal Cycles"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-05-19T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tidalcycles.org/blog/link_as_scheduler"><link data-rh="true" rel="alternate" href="https://tidalcycles.org/blog/link_as_scheduler" hreflang="en"><link data-rh="true" rel="alternate" href="https://tidalcycles.org/blog/link_as_scheduler" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J249KQ0XHA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tidal Cycles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tidal Cycles Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Tidal Cycles" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.c31ea3b4.css">
<link rel="preload" href="/assets/js/runtime~main.9b14e598.js" as="script">
<link rel="preload" href="/assets/js/main.883816b5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Tidal Cycles</b></a><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/docs/reference/cycles">Reference</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/community">Community</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/blog/link_as_scheduler" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/tidalcycles/Tidal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_messica_arson">Blog Post by Messica Arson</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_mandalas">Mandalas and Tidal Cycles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_geikha">Tidal Profile - GEIKHA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/about">Tidal Blog Info</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_violahe">Tidal Profile - Viola He</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_playlist-eclectic">Tidal Playlist - Eclectic</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_ghales">Tidal Profile - Ghales</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_relyt_r_xuixo">Tidal Music - Xuixo EP by Relyt R</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_visualizer">Tidal Visualization with Didactic Pattern Visualizer</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_HelenPapaioannou">Tidal Profile - Helen Papaioannou</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_qbrnthss">QBRNTHSS - making a live coding album</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_Eloi_el_Bon_Noi">Tidal Profile - Eloi el Bon Noi (Eloi the good guy)</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/link_as_scheduler">How Link became Tidal&#x27;s scheduler</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blog_topic_ghostchamb3r">Prepared Code with ghostchamb3r</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_LINALAB">Tidal Profile - LINALAB</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_digitalselves">Tidal Profile - digital selves</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_heavylifting">Working with samples the Heavy Lifting way</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_djmelan3">Tidal Profile - djmelan3 (Mel Laubscher)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_tadokoro">Tidal Profile - Atsushi Tadokoro</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_froos">Tidal Profile - froos</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_polymorphic_engine">Tidal Profile - polymorphic_engine</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_pondskater">Tidal Profile - Pondskater (aka Axel Ganz)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_ndr_brt">Tidal Profile - ndr_brt</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_bubobubo">Tidal Profile - BuboBubo (Raphaël Maurice Forment )</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tidal_profile_tedthetrumpet">Tidal Profile - tedthetrumpet (J Simon van der Walt)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/contributor_profile_cleary">Tidal Profile - cleary (Bernard Gray)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blogArchive">Blog Archive</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">How Link became Tidal&#x27;s scheduler</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-05-19T00:00:00.000Z" itemprop="datePublished">May 19, 2023</time></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Hello, I&#x27;m Pierre Krafft, aka Zalastax, a software engineer and hobby-musician from Gothenburg, Sweden. I&#x27;ve been enjoying Tidal since late 2021 after first dabbling a bit with Orca and, way before that, Sonic Pi. I primarily use Tidal to control hardware synthesizers using MIDI. Tidal is a really neat sequencer and I think there&#x27;s a lot of untapped potential which I hope to explore more in the future.</p><p>This post shares my experience of replacing a significant part of the Tidal internals.
What I achieved is a direct integration from Tidal with Link,
which is a library for synchronizing musical time between applications.</p><p>In this post, I&#x27;ll explain why Link integration was important to me,
provide an introduction to Tidal internals (with a focus on scheduling),
some important concepts of Link,
and how I overcame some really tough challenges!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-idea">The idea<a class="hash-link" href="#the-idea" title="Direct link to heading">​</a></h2><p>I make music with friends who use traditional synth setups.
To have our synths play in sync, we connect them over MIDI.
But when I started using Tidal,
setting up the MIDI clock was not so convenient and I was afraid of it crashing, which would stop the show for everyone.
So I started looking for a way to have a stable MIDI clock
and connect it with Tidal.
Soon thereafter, I learned about Link.</p><p>The purpose of Link is to &quot;synchronize musical beat, tempo, phase <!-- -->[...]<!-- --> across multiple applications running on one or more devices.&quot; Unlike traditional MIDI clock synchronization, which relies on a single device acting as the master clock and sending timing information to all connected devices, Link uses a peer-to-peer network protocol to allow all devices to communicate with each other and agree on a common tempo and beat phase. This allows for more accurate and stable synchronization between devices, even if the tempo changes or if devices are added or removed from the network. Additionally, Link provides a way to sync devices wirelessly, eliminating the need for physical connections between devices.</p><p>My idea was to have some application listen to the MIDI clock and use Link to sync Tidal with that MIDI clock.
I learned later that Link is not meant to be used that way,
but the idea got me started on integrating Tidal with Link...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-get-started">I get started<a class="hash-link" href="#i-get-started" title="Direct link to heading">​</a></h2><p>November 2021 is the start of my journey for adding Link support to Tidal.
I started discussing the path forward with Yaxu, Tidal&#x27;s inventor, in two Github Issues (<a href="https://github.com/yaxu/hylia-haskell/issues/1" target="_blank" rel="noopener noreferrer">1</a>, <a href="https://github.com/tidalcycles/Tidal/issues/660" target="_blank" rel="noopener noreferrer">2</a>).
Yaxu had already done some thinking about adding Link to Tidal and he had also done some exploration that I could learn from.
His positive responses motivated me and brought me confidence that this was a pursuit worth taking!</p><p>One of the main challenges of integrating Link with Tidal was that Tidal is written in Haskell, while Link is a C++ library. I knew that C++ libraries can be exposed as C libraries, and Haskell can interact with C libraries through a mechanism called the &quot;Foreign Function Interface&quot; (FFI), but I had never done so before.
Nonetheless, I set out to create a basic Link integration in Haskell and I fairly quickly had something that compiled.
In the world of Haskell, this is often a huge success which means you can pack up - work&#x27;s done!
But in this case, work was far from done...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="challenges">Challenges<a class="hash-link" href="#challenges" title="Direct link to heading">​</a></h2><p>Some parts of the Link library was working, but when calling the crucial code <code>this-&gt;link.enable(true);</code>, GHC (the Haskell compiler / interpreter) crashed.</p><p>Debugging internal GHC crashes is tricky for most people, so I made many twists and turns to find out what might be wrong.
Several long nights were spent reinstalling Haskell and battling build system configuration.
The full details are documented in <a href="https://github.com/tidalcycles/Tidal/issues/660" target="_blank" rel="noopener noreferrer">the issue for Link support in Tidal</a>, but the short story is that I found out that could avoid the crash by including Link as a shared Library.
This workaround was not suitable for the final release of Link support, but it let me continue the work.</p><p>After making great progress on the Link integration, I became ready to start replacing the workaround.
6 weeks into my ambitious project, I was ready to report an <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/20918" target="_blank" rel="noopener noreferrer">issue to the Haskell maintainers</a>.
I reported that my program worked when using <code>cabal v2-run</code> but not <code>cabal v2-repl</code>.
Since Tidal uses GHCi (the REPL), this problem was crucial to resolve.</p><p>Several GHC maintainers pitched in, offering suggestions and trying to reproduce my issue.
Unfortunately, I could reproduce the issue, but the GHC maintainers were not as successful so interest faded.</p><p>I went ahead and reproduced the issue several times, but only on Windows - not Linux, and even got a friend to reproduce it on their machine.
However, this did not immediately rekindle the interest of the maintainers.</p><p>I started digging deeper to identify the root cause.
First by using WinDbg, but the call stacks and multiple threads were too convoluted for me to digest.
So I resorted to print-debugging, working my way through the C++ code, adding printouts everywhere.
Soon thereafter, I had my eureka moment!
I isolated the issue to be caused by using C++ Exceptions!
Even caught exceptions caused issues for GHCi, but not for the compiled executable.</p><p>I could now provide a <a href="https://github.com/Zalastax/ghc-bug-20918" target="_blank" rel="noopener noreferrer">minimal example</a> and, one day later, a Haskell maintainer replied with a <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/20918#note_414002" target="_blank" rel="noopener noreferrer">detailed analysis</a>, which I quote here in full:</p><blockquote><p>The RTS&#x27;s Runtime linker doesn&#x27;t support C++ exceptions on any platform in non-dynamic way. Historically we&#x27;ve never needed to as not many C++ code was being used.  It works on Linux because it defaults to dynamic way, which gets the system loader to handle the heavy lifting.</p><p>On Windows we don&#x27;t handle .xdata and .pdata sections, so once you get an exception the OS unwinder asks us if we can handle the exception and we say no and move on and the crash occurs. You don&#x27;t see GHC&#x27;s panic message because the dynamic code is created outside of GHC&#x27;s VEH region.</p><blockquote><p>If I instead build a .dll and make my FFI calls towards that .dll, the code does not crash in GHCi</p></blockquote><p>Yes for the same reason as it works on Linux, the exception will be handled by the system unwinder.</p><p>Now supporting this on Windows these days is a lot easier than it used to be.  GHC Already has a native exception handling in place for itself in the VEH handlers. and we&#x27;ve dropped support for x86. x86_64 uses exception tables but gives us an easy way to extend the exception tables for dynamic code like JITed code.</p></blockquote><p>3 months later, the issue was fully fixed and ready to be included in GHC 9.4.2.
This let me finally remove the workaround, use Link directly instead of as a shared library,
and integrate my work to the Tidal repository.
This bug in GHC is the reason Tidal 1.9 requires GHC 9.4.2 or later on Windows.</p><p>I&#x27;m very proud of my perseverence to resolve this issue.
I started my attemps late November 2021 and merged the code to Tidal early July 2022.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="link-and-tidal-integration-architecture-overview">Link and Tidal integration: Architecture Overview<a class="hash-link" href="#link-and-tidal-integration-architecture-overview" title="Direct link to heading">​</a></h2><p>The integration of Link with Tidal posed several challenges but the end result was a success. In this section, we provide an overview of the architecture of the Link and Tidal integration and discuss the design choices made along the way. This information can serve as a guide for those who wish to create their own Link integration in different projects.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidal-innards">Tidal Innards<a class="hash-link" href="#tidal-innards" title="Direct link to heading">​</a></h3><p>Let&#x27;s start by exploring some Tidal Innards. For a more complete reference, please refer to <a href="https://tidalcycles.org/docs/innards/what_is_a_pattern" target="_blank" rel="noopener noreferrer">What is a pattern?</a>.</p><p>Some important concepts in Tidal innards are Arc, Part and Event:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- | A time arc (start and end)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type Arc = (Time, Time)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- Tidal often needs to represent a Part of an Arc.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- It does so with two arcs, the first representing the whole of the part,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- and the second the part itself.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- Often both arcs will be the same,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- which simply means that we have a whole that has a single part.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- | The second arc (the part) should be equal to or fit inside the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- first one (the whole that it&#x27;s a part of).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type Part = (Arc, Arc)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- | An event is a value that&#x27;s active during a timespan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type Event a = (Part, a)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Tidal processes musical patterns by querying for all Events within an Arc.
The Events returned by the query are distributed to targets such as SuperCollider.
These details remained unchanged when moving to Link as the base for the scheduler.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="link-concepts">Link Concepts<a class="hash-link" href="#link-concepts" title="Direct link to heading">​</a></h3><p>The Link API is responsible for converting between beats/cycles on a shared timeline and a clock that corresponds to when the sound should play from the speaker.
The concept is visualized in a timeline diagram below.
Two Link instances are shown.
The top and bottom of the diagram show how the two instances have their own beat counter.
However, the beats have a shared phase - they align over bar or loop boundaries.
I created the diagram below with alignment every 8 bars.</p><p><img loading="lazy" alt="link timeline diagram" src="/assets/images/link_timeline-eaca5be07783c6ce6c68b4117f37e64e.png" width="736" height="401" class="img_ev3q"></p><p>The API between Tempo.hs and Stream.hs hides how Link is called.
This helps separate concerns but could also enable alternative time keeping mechanisms.
It should not be too difficult to implement the API using the local system clock and memory to keep track of a local timeline.
Please reach out if you would like to create such an implementation!
Doing so could open the door for adding back other synchronization mechanisms again :)</p><p>The API between Tempo.hs and Stream.hs includes the following operations:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">data LinkOperations = LinkOperations {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeAtBeat    :: Link.Beat -&gt; IO Link.Micros,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeToCycles  :: Link.Micros -&gt; IO P.Time,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  getTempo      :: IO Link.BPM,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  setTempo      :: Link.BPM -&gt; Link.Micros -&gt; IO (),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  linkToOscTime :: Link.Micros -&gt; O.Time,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  beatToCycles  :: CDouble -&gt; CDouble,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cyclesToBeat  :: CDouble -&gt; CDouble</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="calling-the-link-api-from-haskell">Calling the Link API from Haskell<a class="hash-link" href="#calling-the-link-api-from-haskell" title="Direct link to heading">​</a></h4><p>As mentioned in <a href="#Troubles">Troubles</a>, Link is a C++ library and the Haskell integration is done using the &quot;Foreign Function Interface&quot; (FFI).
Haskell has some support for integrating directly with C++,
but it seemed too difficult to use for my taste.</p><p>Fortunately, while I was working on my implementation,
Link released a C-wrapper of their library.
Integrating with C-libraries from Haskell is fairly easy,
and mostly comes down to setting up the compiler correctly and defining the C-functions in a .hsc-file.</p><p>Conversion is straight forward:</p><div class="language-Haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- Haskell</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data AbletonLinkImpl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data SessionStateImpl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newtype AbletonLink = AbletonLink (Ptr AbletonLinkImpl)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newtype SessionState = SessionState (Ptr SessionStateImpl)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreign import ccall &quot;abl_link.h abl_link_commit_app_session_state&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  commitAppSessionState :: AbletonLink -&gt; SessionState -&gt; IO ()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-C codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-C codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// C</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> typedef struct abl_link</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void *impl;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  } abl_link;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  typedef struct abl_link_session_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void *impl;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  } abl_link_session_state;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void abl_link_commit_app_session_state(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    abl_link link, abl_link_session_state session_state);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ticks-and-processing-ahead">Ticks and Processing Ahead<a class="hash-link" href="#ticks-and-processing-ahead" title="Direct link to heading">​</a></h3><p>Tidal needs to process events a few hundred milliseconds early so that the event can reach the sound engine/synthesizer in time.
Otherwise, the event would play late from the speaker, and we would not be synchronized with others in the same Link session.
The processing ahead is configured via <code>cProcessAhead</code>.</p><p>The scheduler is based on &quot;logical time&quot; that uses a tick based system.
This means that the implementation keeps track of the starting time and the length of each &quot;tick&quot; in order to step time forward in equal chunks.
To turn the tick number into a &quot;logical time&quot;, the following formula is used:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">logicalTime startTime ticks&#x27; = startTime + ticks&#x27; * frameTimespan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Working with logical time / ticks is a common approach to avoid time drifts which I kept from the original scheduler.
I&#x27;m not sure how much difference it still makes now that Link does the heavy lifting,
but it felt safest to keep it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-together">Putting it together<a class="hash-link" href="#putting-it-together" title="Direct link to heading">​</a></h3><p>With the different components explained, I can now explain the whole:</p><ul><li>Tidal processes events ahead of time by querying for events within an Arc that has not happened yet (based on the tick system).</li><li>Processing events ahead of time is common to all Link based systems since it&#x27;s the only way to not play the sound too late due to the Link API being based on when the sound should play from the speaker.</li><li>The translation from cycles in Tidal to a timestamp is performed by the Link API.</li></ul><p>The picture below shows the relation between Link, the logical clock, and the current time.
The current time is greater than the logical time of Tick 24,
which means that we should be processing all Events that happen between the Arc <code>(Tick 24,  Tick 25)</code>.
We query for all Events within this Arc and convert the start and end cycle of each Event to a clock time by using the Link API.
As mentioned earlier, the events that we currently query for should all happen in the future.
This is why the mapping from Logical clock to Link instance time is a diagonal arrow that goes forward in time.</p><p><img loading="lazy" alt="logical clock" src="/assets/images/logical_clock-39fdcee171044a130d3ba7633ce13614.png" width="824" height="514" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-about-multithreading">A note about multithreading<a class="hash-link" href="#a-note-about-multithreading" title="Direct link to heading">​</a></h3><p>The scheduler runs in a separate thread, so Tidal is multithreaded.
This follows the approach used by the previous scheduler and ensures that the GHCi REPL keeps being responsive.</p><p>The original design used several MVars to copy data between processes.
MVars are a concept from concurrent Haskell.
They act as synchronising variables and are used for communication between concurrent threads.</p><p>However, the design based on several MVars made the code difficult to follow and hard to verify for correctness.
In the new design, we communicate between threads using a list of actions, similar to dispatching Actions to Redux in JavaScript or calling an actor in Erlang.
This puts all the tricky logic that deals with the internal state in a single place.
Following this approach makes the code much more easy to reason about and is why I like Erlang so much ;)</p><p>The list of actions is communicated using an <code>MVar [TempoAction]</code>.
The definition of <code>TempoAction</code> is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">data TempoAction =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SetCycle P.Time</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  | SingleTick P.ControlSignal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  | SetNudge Double</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  | StreamReplace ID P.ControlSignal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  | Transition Bool TransitionMapper ID P.ControlSignal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each action can thus be handled in sequence, making the logic easy to reason about.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-words">Final words<a class="hash-link" href="#final-words" title="Direct link to heading">​</a></h2><p>Contributing to Tidal was (and continues to be) a very fun experience!
The community is very nice and supportive and I enjoy working in the codebase.</p><p>It was surprising to see that I appear to be the first person to integrate between Haskell and C++ on Windows.
At least I am the first to report an error instead of giving up.
I mean, the error I stumbled upon would have been found in most efforts to use C++ from Haskell because exceptions are very common in C++.</p><p>Once I could avoid the bugs in GHC, reworking the Tidal internals was quite straight forward.
Even though I ripped most of the scheduler apart, the Haskell type system guided me through the refactoring.
The next goal was always visible and I had direction for what next step to take.</p><p>Finally, I want to thank my girlfriend Moa for supporting me through this project and for listening to me explaining my ups and downs.
The details must have been inpenetrable to understand,
but she still listened and shared my joy or despair.
For that, and incountable other things: Moa, I love you!</p><p>To the rest of the Tidal community, you&#x27;re awesome too, and I&#x27;m happy to be a part of your world!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/tidalcycles/Tidal/issues/660" target="_blank" rel="noopener noreferrer">GitHub Issue - Link support</a></li><li><a href="https://gitlab.haskell.org/ghc/ghc/-/issues/20918" target="_blank" rel="noopener noreferrer">GHC Issue - Sudden exit in GHCi for FFI code - works when run as executable</a></li><li><a href="http://ableton.github.io/link/" target="_blank" rel="noopener noreferrer">Link documentation</a></li><li><a href="https://tidalcycles.org/docs/innards/what_is_a_pattern" target="_blank" rel="noopener noreferrer">What is a pattern?</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/tidalcycles/tidal-doc/tree/main/blog/blog/link_as_scheduler.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/tidal_profile_Eloi_el_Bon_Noi"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Tidal Profile - Eloi el Bon Noi (Eloi the good guy)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/blog_topic_ghostchamb3r"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Prepared Code with ghostchamb3r</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#the-idea" class="table-of-contents__link toc-highlight">The idea</a></li><li><a href="#i-get-started" class="table-of-contents__link toc-highlight">I get started</a></li><li><a href="#challenges" class="table-of-contents__link toc-highlight">Challenges</a></li><li><a href="#link-and-tidal-integration-architecture-overview" class="table-of-contents__link toc-highlight">Link and Tidal integration: Architecture Overview</a><ul><li><a href="#tidal-innards" class="table-of-contents__link toc-highlight">Tidal Innards</a></li><li><a href="#link-concepts" class="table-of-contents__link toc-highlight">Link Concepts</a></li><li><a href="#ticks-and-processing-ahead" class="table-of-contents__link toc-highlight">Ticks and Processing Ahead</a></li><li><a href="#putting-it-together" class="table-of-contents__link toc-highlight">Putting it together</a></li><li><a href="#a-note-about-multithreading" class="table-of-contents__link toc-highlight">A note about multithreading</a></li></ul></li><li><a href="#final-words" class="table-of-contents__link toc-highlight">Final words</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">TidalCycles</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/">Community</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://club.tidalcycles.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ugFq7KfGnB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtube.com/tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://post.lurk.org/@tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tidalcycles/Tidal" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Creative Commons Attribution ShareAlike<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 TidalCycles. Creative Commons Attribution-ShareAlike</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b14e598.js"></script>
<script src="/assets/js/main.883816b5.js"></script>
</body>
</html>